# План тестирования:

### Перечень автоматизируемых сценариев:

##### Валидные входные данные для сценариев:
- месяц и год- на текущую дату срок действия карты не истек (1. год более текущего или 2. месяц более текущего и текущий год)
- Владелец- 1 и более символа на латинице
- CCV- три цифры, кроме 000
#### ***Сценарии с оплатой по карте***

1.  **Название:** Оплата тура картой валидными данными 

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        3. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Выходит pop-up "Успешно Операция одобрена банком", в БД есть запись об успешной транзации

---
2. **Название:** Оплата тура картой с невалидным номером

   **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4442
        2. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        3. Нажать кнопку "Продолжить"
   **Ожидаемый результат:** Выходит pop-up "Ошибка! Банк отказал в проведении операции", В БД запись транзации со статусом "declined"

---

3. **Название:** Оплата тура картой с невалидным CCV

   **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поля "месяц", "год", "Владелец" валидные данные
        3. Ввести в поле "CCV" - 000
        4. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Выходит pop-up "Ошибка! Банк отказал в проведении операции", В БД нет запись об успешной транзации

---
4. **Название:** Оплата тура картой с невалидным именем пользователя
   
    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поля "месяц", "год", "CCV" валидные данные
        3. Ввести в поле "Владелец" - Иван Королев
        4. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Выходит pop-up "Ошибка! Банк отказал в проведении операции", В БД нет запись об успешной транзации

---
5. **Название:** Оплата тура картой с прошедшим годом

   **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поле "месяц" - 01
        3. Ввести в поле "год" - 22
        4. Ввести в поля "Владелец", "CCV" валидные данные
        5. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "Год" - "Истек срок действия карты", В БД нет запись об успешной транзации

---
6. **Название:** Оплата тура картой с прошедшим месяцем и текущим годом

   **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

   **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поле "месяц" - 01
        3. Ввести в поле "год" - 23
        4. Ввести в поля "Владелец", "CCV" валидные данные
        5. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "Месяц" - "Неверно указан срок действия карты", В БД нет запись об успешной транзации

---
7. **Название:** Оплата тура картой без внесения данных номера карты

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

    **Шаги:**

        1. Поле "Номер карты" оставить пустым
        2. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        3. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "Номер карты" - "Неверный формат данных", В БД нет запись об успешной транзации

---
8. **Название:** Оплата тура картой без внесения данных CCV

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поля "месяц", "год", "Владелец" валидные данные
        3. Поле "CCV" оставить пустым
        4. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "CCV" - "Неверный формат данных", В БД нет запись об успешной транзации

---
9. **Название:** Оплата тура картой без внесения данных имени пользователя

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441 
        2. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        3. Поле "Владелец" оставить пустым
        4. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "Владедец" - "Неверный формат данных", В БД нет запись об успешной транзации

---
10. **Название:** Оплата тура картой без внесения данных месяца

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Поле "месяц" оставить пустым
        3. Ввести в поле "год" - 24
        4. Ввести в поля "Владелец", "CCV" валидные данные
        5. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "месяц" - "Неверный формат данных", В БД нет запись об успешной транзации

---
11. **Название:** Оплата тура картой без внесения данных года

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поле "месяц" - 12
        3. Поле "год" оставить пустым
        4. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        5. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "год" - "Неверный формат данных", В БД нет запись об успешной транзации

---

#### ***Сценарии с оплатой в кредит***
12. **Название:** Оплата тура  в кредит валидными данными

   **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

   **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        3. Нажать кнопку "Продолжить"
   **Ожидаемый результат:** Выходит pop-up "Успешно Операция одобрена банком", В БД есть запись об успешной транзации

---
13. **Название:** Оплата тура в кредит с невалидным номером карты

   **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

   **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4442
        2. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        3. Нажать кнопку "Продолжить"
   **Ожидаемый результат:** Выходит pop-up "Ошибка! Банк отказал в проведении операции", В БД запись транзации со статусом "declined"

---
14. **Название:** Оплата тура в кредит с невалидным CCV

   **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

   **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поля "месяц", "год", "Владелец" валидные данные
        3. Ввести в поле "CCV" - 000
        4. Нажать кнопку "Продолжить"
   **Ожидаемый результат:** Выходит pop-up "Ошибка! Банк отказал в проведении операции", В БД нет запись об успешной транзации

---
15. **Название:** Оплата тура в кредит с невалидным именем пользователя

   **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

   **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поля "месяц", "год", "CCV" валидные данные
        3. Ввести в поле "Владелец" - Петя Петров
        4. Нажать кнопку "Продолжить"
   **Ожидаемый результат:** Выходит pop-up "Ошибка! Банк отказал в проведении операции", В БД нет запись об успешной транзации

---
16. **Название:** Оплата тура в кредит с прошедшим годом

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поле "месяц" - 12
        3. Ввести в поле "год" - 21
        4. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        5. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "Год" - "Истек срок действия карты", В БД нет запись об успешной транзации

---
17. **Название:** Оплата тура в кредит с прошедшим месяцем и текущим годом

   **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

   **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поле "месяц" - 01
        3. Ввести в поле "год" - 23
        4. Ввести в поля "Владелец", "CCV" валидные данные
        5. Нажать кнопку "Продолжить"
   **Ожидаемый результат:** Появляется сообщение у поля "Месяц" - "Неверно указан срок действия карты", В БД нет запись об успешной транзации

---
18. **Название:** Оплата тура в кредит без внесения данных номера карты

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

    **Шаги:**

        1. Поле "Номер карты" оставить пустым
        2. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        3. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "Номер карты" - "Неверный формат данных", В БД нет запись об успешной транзации

---
19. **Название:** Оплата тура в кредит без внесения данных CCV

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        3. Поле "CCV"  оставить пустым
        4. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "CCV" - "Неверный формат данных", В БД нет запись об успешной транзации

---
20. **Название:** Оплата тура в кредит без внесения данных имени пользователя

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поля "месяц", "год", "CCV" валидные данные
        3. Поле "Владелец" оставить пустым
        4. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "Владедец" - "Неверный формат данных", В БД нет запись об успешной транзации

---
21. **Название:** Оплата тура в кредит без внесения данных месяца

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Поле "месяц"  оставить пустым
        3. Ввести в поле "год" - 21
        4. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        5. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "месяц" - "Неверный формат данных", В БД нет запись об успешной транзации

---
22. **Название:** Оплата тура в кредит без внесения данных года

    **Предусловия:** в браузере запустить http://localhost:8080/, нажать кнопку "Купить в кредит"

    **Шаги:**

        1. Ввести в поле "Номер карты" - 4444 4444 4444 4441
        2. Ввести в поле "месяц" - 12
        3. Поле "год"  оставить пустым
        4. Ввести в поля "месяц", "год", "Владелец", "CCV" валидные данные
        5. Нажать кнопку "Продолжить"
    **Ожидаемый результат:** Появляется сообщение у поля "год" - "Неверный формат данных", В БД нет запись об успешной транзации**

---

#### Использования двух окружений:
   1. MySQL
   2. PostgreSQL


По итогу каждого сценария проверяется наличие записи в БД. 

При позитивной проверке- должна быть запись о транзации в соответстующей БД
(без указания данных о карте, но указании способа оплаты: Payment или Credit).

При негативной проверке- не должно быть изменений в БД.


### Перечень используемых инструментов с обоснованием выбора
    Selemiun- работа с UI сайта
    Allure- отчеты тестирования
    DbUtils - работа с запросами в БД


### Перечень и описание возможных рисков при автоматизации
   1. Изменение локаторов элементов UI
   2. Проблема с подключением к БД


### Интервальная оценка с учётом рисков в часах
    

### План сдачи работ: когда будут готовы автотесты, результаты их прогона

- Готовность автотестов- 27.08.23 г.
- Готовность отчетности по прогонам - 03.09.23 г.